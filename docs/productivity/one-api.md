# One API ä¸­è½¬æœåŠ¡

::: tip æœ€æ–°åŠ¨æ€ 2024-09-13

- OpenAIå®¶æœ€æ–°çš„ o1-preview å’Œ o1-mini æ¨¡å‹å› ä¸ºæˆ‘ä¸¤ä¸ªå·çš„ç­‰çº§éƒ½è¿˜ä¸å¤Ÿï¼Œæš‚ä¸æ”¯æŒï¼Œä½†åº”è¯¥å¿«äº†ã€‚ã€‚ã€‚

- å·²æ”¯æŒOpenAIå®¶çš„ **gpt-4o, gpt-4o-mini**ï¼›

- å·²æ”¯æŒAnthropicå®¶çš„claude-3.5-sonnet-20240620,claude-3-opus-20240229, claude-3-sonnet-20240229, claude-3-haiku-20240307ï¼›

- ä¹‹å‰å¤§å®¶åœ¨å°åº—è´­ä¹°çš„sk-å¼€å¤´çš„keyï¼Œè¿˜æœªç”¨å®Œçš„ï¼Œå¯ä»¥å°†å‰©ä½™çš„é¢åº¦è½¬å…¥æ–°çš„ä¸­è½¬æœåŠ¡é¢åº¦ä¸­ï¼Œåœ¨å…¬ä¼—å·åå°ç§ä¿¡æˆ‘æˆ–è€…åŠ å¾®ä¿¡ï¼šniu_bilibiliï¼Œéº»çƒ¦å„ä½å°Šè´µçš„å°Šäº«GPTç”¨æˆ·äº†ã€‚ğŸ™ğŸ™ğŸ™

:::

â‡ï¸ æ¬¢è¿ä½¿ç”¨ Aiè‡ªå¼ºå°‘å¹´ æä¾›çš„One APIä¸­è½¬æœåŠ¡ï¼Œå½“å‰æ”¯æŒ **OpenAI** å’Œ**Anthropic** çš„å®˜æ–¹æ¥å£ï¼Œåç»­è€ƒè™‘æ¥å…¥æ›´å¤šä¸»æµå¤§æ¨¡å‹ã€‚

âš ï¸ æœ¬æœåŠ¡æ²¡æœ‰ç‰¹è‰²ï¼Œç¨³å®šä¸æŠ˜è…¾ï¼Œæ—¨åœ¨ä¸ºç½‘ç»œæˆ–è€…æ”¯ä»˜å›°éš¾çš„ç”¨æˆ·æä¾›ä¾¿åˆ©ã€‚æŠ˜è…¾è¿‡å°±ä¼šç¡®ä¿¡ï¼š**æ—¶é—´å°±æ˜¯é‡‘é’±ï¼Œç¨³å®šå‹å€’ä¸€åˆ‡**ã€‚

ğŸ’¡ ä½ å¯ä»¥å…ˆåœ¨[ä¸­è½¬æœåŠ¡](https://one-api.aiporters.com/)æ³¨å†Œä¸€ä¸ªè´¦å·ï¼Œæœ‰ **$0.1** çš„ä½“éªŒé¢åº¦ï¼Œè¿›å…¥ [æ§åˆ¶å°]->[ä»¤ç‰Œ]->[æ–°å»ºä»¤ç‰Œ] åå°±å¯ä»¥åœ¨å†…ç½®çš„ ğŸ‘‰[å°Šäº« GPT](https://next.aiporters.com/) ä¸­ä½¿ç”¨ï¼š

<iframe src="https://one-api.aiporters.com/video/chat_entry.mp4" allow="fullscreen" allowfullscreen="" width="800" height="450" style="border:0"></iframe>

ğŸš¦ ç½‘ç»œç¯å¢ƒï¼šå„åœ°è¿æ¥é€Ÿåº¦ä¸åŒï¼Œå¦‚æ— æ³•è®¿é—®è¯´æ˜ç¼˜åˆ†æœªåˆ°ï¼Œä¸å‹‰å¼ºï¼›è‹¥æ˜¯é’¢é“èˆ¬çš„éœ€æ±‚ï¼Œè¯·åœ¨å¾®ä¿¡å…¬ä¼—å·ç§ä¿¡è”ç³»ã€‚

## è¿™æ˜¯ä»€ä¹ˆï¼Ÿ

ç”±äº OpenAI ç­‰ä¸€ä¼—å›½å¤–çš„å¤§æ¨¡å‹å‚å•†å¯¹å›½å†…ç”¨æˆ·åšäº†é™åˆ¶ï¼Œå¯¼è‡´å›½å†…ç”¨æˆ·å¾ˆéš¾è½»æ¾ä½¿ç”¨ ChatGPT ç±»æœåŠ¡ï¼Œå¾ˆå¤šåŸºäº ChatGPT çš„èŠå¤©è½¯ä»¶ï¼Œæ¯”å¦‚ï¼š

- ChatGPT Next Web

- ChatGPT Web

- æ²‰æµ¸å¼ç¿»è¯‘

- ä»¥åŠå„ç§å„æ ·çš„æµè§ˆå™¨æ’ä»¶

åŒæ—¶å¤§æ¨¡å‹å¼€å‘ä½¿ç”¨çš„ langchainã€llamaindex ç­‰åº“ï¼Œå¾€å¾€éœ€è¦ç”¨æˆ·ä¼ å…¥ OpenAI API Keyï¼Œä½†åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œå›½å†…çš„ç½‘ç»œçŠ¶å†µéƒ½ä¸å…è®¸ç›´è¿ **api.openai.com** ï¼ˆOpenAI çš„ API ç«¯å£ï¼‰ï¼Œæ‰€ä»¥æˆ‘æä¾›äº†æ­¤ä¸­è½¬æœåŠ¡ï¼Œå®ƒçš„ç‰¹ç‚¹ï¼š

- ç¨³å®šï¼šæˆ‘åº”è¯¥ä¸ä¼šè½»æ˜“è·‘è·¯ï¼Œæ¯•ç«Ÿè¿™ç©æ„å„¿ä¹Ÿèµšä¸äº†å‡ ä¸ªé’±ï¼Œåªæ˜¯ç”¨äºç»´æŒå…¬ä¼—å·çš„æ—¥å¸¸è¿è¥ï¼›

- æ–¹ä¾¿ï¼šæ‰€æœ‰ç”¨åˆ° OpenAI API çš„åœ°æ–¹éƒ½å¯ä»¥æ— ç¼æ›¿ä»£ï¼›

- å¿«é€Ÿï¼šæˆ‘ä¼šæŒç»­ä¼˜åŒ–ä¸­è½¬æœåŠ¡çš„çº¿è·¯é€Ÿåº¦ï¼Œæ¥ä¿è¯ä½¿ç”¨ä½“éªŒï¼›

- çœå¿ƒï¼šæ²¡æœ‰åŒ…æœˆï¼Œæ²¡æœ‰ä¼šå‘˜ï¼Œæ²¡æœ‰é™æ—¶ï¼Œç”¨å¤šå°‘ä¹°å¤šå°‘ï¼Œä¸ç”¨æ‹…å¿ƒè¿‡æœŸã€‚

## ä¸ºä»€ä¹ˆè¦æä¾›è¿™ä¸ªä¸­è½¬æœåŠ¡ï¼Ÿ

æˆ‘åœ¨å…¬ä¼—å·ä¸Šæä¾›çš„ä¸‰ä¸ªå…è´¹é¡¹ç›®[é²æ ‘äºº GPT](../free/lushuren.md), [åŸå‘³ GPT(å·²åœæœ)](../free/pandora.md) å’Œ [ç®€æ´ GPT(å·²åœæœ)](../free/simple.md) å¸å¼•äº†ä¸å°‘ç”¨æˆ·ã€‚ç„¶è€Œï¼Œéšç€é¡¹ç›®çš„åŠŸèƒ½ç¨³å®šï¼Œæ¥è‡ªæ–‡ç« çš„èµèµæ—¥ç›Šå‡å°‘ï¼Œè€ŒæœåŠ¡å™¨ï¼ŒåŸŸåï¼Œç½‘ç»œéƒ½æ˜¯éœ€è¦æŒç»­æŠ•å…¥çš„ã€‚

æ‰€ä»¥å†³å®šå†ä¸ºæœ‰APIä½¿ç”¨éœ€æ±‚çš„ç”¨æˆ·ä»¬æä¾›ä¸»æµå¤§æ¨¡å‹çš„å®˜æ–¹ API ä¸­è½¬æœåŠ¡ï¼Œè¿™æ ·å¤§å®¶æ— éœ€æŠ˜è…¾ç¹ççš„è´¦å·æ³¨å†Œå’Œç¼´è´¹æµç¨‹ï¼Œå°±èƒ½ç”¨ä¸å®˜æ–¹ç›¸åŒçš„ä»·æ ¼ä½¿ç”¨å„å®¶å¤§æ¨¡å‹çš„ APIã€‚

## ç›®å‰æ”¯æŒå“ªäº›æ¨¡å‹ï¼Ÿ

### OpenAI 

![image.png](oneapi/oai-models.png)

### Anthropic Claude

![image.png](oneapi/Anthropic-models.png)

## åç»­è¿˜ä¼šæ”¯æŒå“ªäº›æ¨¡å‹ï¼Ÿ

ä¸»è¦å‚è€ƒ: [LMSYS èŠå¤©æœºå™¨äººç«æŠ€åœºæ’è¡Œæ¦œ](https://chat.lmsys.org/?leaderboard) 

![image.png](oneapi/leaderboard.png)

## å¦‚ä½•ä½¿ç”¨ï¼Ÿ

### è´¦å·->ä»¤ç‰Œ->é¢åº¦

1. æ‰“å¼€[oneapiä¸­è½¬æœåŠ¡: https://one-api.aiporters.com/](https://one-api.aiporters.com/)

2. å³ä¸Šè§’æ‰¾åˆ°ç™»å½•æŒ‰é’®ï¼Œè¿›å…¥æ³¨å†Œé¡µé¢ï¼Œå…ˆæ³¨å†Œä¸€ä¸ªè´¦å·ï¼›

![image.png](oneapi/login.png)

![image.png](oneapi/register.png)


3. æ³¨å†ŒæˆåŠŸåï¼Œç™»å½•ç³»ç»Ÿï¼Œè¿›å…¥**æ€»è§ˆ**é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ° $0.1 çš„ä½“éªŒé¢åº¦ï¼›

![image.png](oneapi/overview.png)

4. è¿›å…¥**ä»¤ç‰Œ**é¡µé¢->**æ–°å»ºä»¤ç‰Œ**->è®¾ç½®åç§°åŠæ˜¯å¦é™åˆ¶ä»¤ç‰Œé¢åº¦

![image.png](oneapi/create-key1.png)

![image.png](oneapi/create-key2.png)

5. ä»¤ç‰Œåˆ›å»ºæˆåŠŸåï¼Œå¯ä»¥ç›´æ¥ç‚¹å‡»å³è¾¹çš„**èŠå¤©**æŒ‰é’®ï¼Œè¿›å…¥å†…ç½®çš„å°Šäº«GPTä½¿ç”¨ï¼›

![image.png](oneapi/chat-entry.png)

ç³»ç»Ÿä¼šè‡ªåŠ¨å°†ä»¤ç‰Œ å’Œ ä¸­è½¬åœ°å€å¡«å…¥å°Šäº«GPTä¸­ï¼Œè¿™æ ·å°±æ— éœ€æ‰‹å·¥å¡«å†™ï¼Œç›´æ¥å¼€èŠï¼›

![image.png](oneapi/enter-key.png)

::: tip å°æç¤º

1. æ­£å¼ä½¿ç”¨ä¹‹å‰ï¼Œå…ˆæ‰“å¼€è®¾ç½®é¡µé¢

2. å¯ä»¥åœ¨åœ¨æ¨¡å‹åˆ—è¡¨ä¸­é€‰æ‹©ä½ é»˜è®¤ä½¿ç”¨çš„æ¨¡å‹ï¼›

3. å»ºè®®æŠŠ æ³¨å…¥ç³»ç»Ÿçº§æç¤ºä¿¡æ¯ çš„å‹¾é€‰å»æ‰ï¼Œè¿™ä¸ªä¼šå½±å“è‡ªå®šä¹‰æ¨¡å‹çš„ä½¿ç”¨ï¼›

:::

![image.png](oneapi/before-chat.png)

6. å¦‚æœé¢åº¦ç”¨å®Œäº†ï¼Œè¿›å…¥**å……å€¼**é¡µé¢ï¼Œç‚¹å‡»**è·å–å…‘æ¢ç **ï¼Œè¿›å…¥[AIè‡ªå¼ºå°‘å¹´çš„å°åº—](https://shop.wehugai.com), è´­ä¹°å¯¹åº”é¢åº¦çš„å…‘æ¢ç å……å€¼å³å¯ï¼›

![image.png](oneapi/charge1.png)

![image.png](oneapi/charge2.png)


### åœ¨å†…ç½®çš„ å°Šäº« GPT ä¸­ä½¿ç”¨

å†çœ‹ä¸€éè¿™ä¸ª10ç§’çš„è§†é¢‘å§ï¼š

<iframe src="https://one-api.aiporters.com/video/chat_entry.mp4" allow="fullscreen" allowfullscreen="" width="800" height="450" style="border:0"></iframe>

### å¦‚æœä½ æ˜¯å¼€å‘è€…

è¯·æŸ¥é˜… OpenAI å®˜æ–¹ API æ–‡æ¡£ï¼š[platform.openai.com](https://platform.openai.com/docs/api-reference/completions/create)

ä½¿ç”¨æ—¶å°†å®˜æ–¹æ–‡æ¡£ä¸­æ‰€æœ‰çš„ `https://api.openai.com` æ›¿æ¢ä¸ºæœ¬æœåŠ¡æä¾›çš„ä¸­è½¬åœ°å€ï¼š**`https://one-api.aiporters.com`**

æ¥å£ç”¨æ³•ä¸ OpenAI å®˜æ–¹ API å®Œå…¨ä¸€è‡´ã€‚

åœ¨å¼€å§‹ä½¿ç”¨ä¹‹å‰ï¼Œä½ éœ€è¦ç”¨åˆ°ä»¥ä¸‹ä¿¡æ¯ï¼š

```Plain Text
ä¸­è½¬æ¥å£åœ°å€ï¼šhttps://one-api.aiporters.com/openai
ä¸­è½¬ API ä»¤ç‰Œï¼šsk-xxxxxxxxx
```

##### [Create chat completion](https://platform.openai.com/docs/api-reference/chat/create)

```bash
curl https://one-api.aiporters.com/v1/chat/completions \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer sk-ä½ çš„ä»¤ç‰Œ" \
  -d '{
    "model": "gpt-4-turbo",
    "messages": [
      {
        "role": "system",
        "content": "You are a helpful assistant."
      },
      {
        "role": "user",
        "content": "say: ä½ å¯çœŸæ˜¯ä¸ªå¤©æ‰ï¼"
      }
    ]
  }'

```

![image.png](oneapi/curl-chat.png)

##### [Create speech](https://platform.openai.com/docs/api-reference/audio/createSpeech)

```bash
curl https://one-api.aiporters.com/v1/audio/speech \
  -H "Authorization: Bearer sk-ä½ çš„ä»¤ç‰Œ" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "tts-1",
    "input": "æˆ‘å¯çœŸæ˜¯ä¸ªå¤©æ‰ï¼",
    "voice": "alloy"
  }' \
  --output speech.mp3
```

![image.png](oneapi/curl-tts1.png)

##### [Create transcription](https://platform.openai.com/docs/api-reference/audio/createTranscription)

```bash
curl https://one-api.aiporters.com/v1/audio/transcriptions \
  -H "Authorization: Bearer sk-ä½ çš„ä»¤ç‰Œ" \
  -H "Content-Type: multipart/form-data" \
  -F file="@./speech.mp3" \
  -F model="whisper-1"
```

![image.png](oneapi/curl-whisper-1.png)

##### [Create image](https://platform.openai.com/docs/api-reference/images/create)

```bash
curl https://one-api.aiporters.com/v1/images/generations \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer sk-ä½ çš„ä»¤ç‰Œ" \
  -d '{
    "model": "dall-e-3",
    "prompt": "ä¸€åªå¯çˆ±çš„å°å“ˆå£«å¥‡",
    "n": 1,
    "size": "1024x1024"
  }'

```

![image.png](oneapi/curl-dalle3.png)


##### è¯»å›¾
```bash
curl https://one-api.aiporters.com/v1/chat/completions \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer sk-ä½ çš„ä»¤ç‰Œ" \
  -d '{
    "model": "gpt-4-turbo",
    "messages": [
      {
        "role": "user",
        "content": [
          {
            "type": "text",
            "text": "è¿™ä¸ªå›¾é‡Œæœ‰ä»€ä¹ˆ?"
          },
          {
            "type": "image_url",
            "image_url": {
              "url": "https://oaidalleapiprodscus.blob.core.windows.net/private/org-O1j0nH5zGYWWeO1hEN30fciJ/user-8XRyOEvkrogdXJE41rHAN0KD/img-PvH2Z40Tkbi7fgnwMQTGzops.png?st=2024-04-12T10%3A15%3A11Z&se=2024-04-12T12%3A15%3A11Z&sp=r&sv=2021-08-06&sr=b&rscd=inline&rsct=image/png&skoid=6aaadede-4fb3-4698-a8f6-684d7786b067&sktid=a48cca56-e6da-484e-a814-9c849652bcb3&skt=2024-04-12T07%3A22%3A01Z&ske=2024-04-13T07%3A22%3A01Z&sks=b&skv=2021-08-06&sig=aEYwNTR6HHaml8rQ2tKvXoh3mkvHBljI63%2B16pKmkXY%3D"
            }
          }
        ]
      }
    ],
    "max_tokens": 300
  }'
```

![image.png](oneapi/curl-gpt-4v.png)


### åœ¨æ²‰æµ¸å¼ç¿»è¯‘ä¸­ä½¿ç”¨

ä½¿ç”¨ä¸‹æ–¹åœ°å€ä½œä¸º API URLï¼ŒAPI Key ä½¿ç”¨ sk- å³å¯ã€‚

```Plain Text
https://one-api.aiporters.com/openai/v1/chat/completions
```

## å®šä»·è§„åˆ™

### ä»€ä¹ˆæ˜¯ tokenï¼Ÿ

Token æ˜¯å¤§è¯­è¨€æ¨¡å‹å¤„ç†ä¿¡æ¯çš„æœ€å°å•å…ƒï¼Œå®ƒä»‹äºâ€œå­—â€å’Œâ€œè¯â€ä¹‹é—´ï¼Œä½ å¯ä»¥ç”¨ä¸‹æ–¹çš„ç½‘å€ï¼Œæ¥è®¡ç®—ä¸€æ®µæ–‡å­—ä¼šå˜æˆå¤šå°‘ tokenï¼š

[gpt-tokenizer playground](https://gpt-tokenizer.dev/)

![image.png](oneapi/image-6.png)

å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œä½ éƒ½å¯ä»¥ä½¿ç”¨ 1 æ±‰å­— = 2 token æ¥è¿‘ä¼¼ä¼°ç®—ä¸­æ–‡èŠå¤©çš„ä¸­æ–‡æ‰€éœ€ token æ•°ã€‚

### å®šä»·è§„åˆ™

å‚è€ƒ[OpenAI å®˜ç½‘ç»™å‡ºçš„å®šä»·](https://openai.com/pricing)

å‚è€ƒ[Anthropic å®˜ç½‘ç»™å‡ºçš„å®šä»·](https://www.anthropic.com/api)

ä¸­è½¬æœåŠ¡ä¸å®˜æ–¹ä¿æŒä¸€è‡´ï¼Œç”±one-apié¡¹ç›®ç»Ÿä¸€ç»´æŠ¤ï¼Œç«¥åŸæ— æ¬ºï¼›

å¯ä»¥åœ¨æ—¥å¿—ç•Œé¢æŸ¥çœ‹æ¯æ¬¡è°ƒç”¨æ¶ˆè€—çš„æƒ…å†µï¼š

![image.png](oneapi/log.png)



## ç”¨æˆ·åè®®

ä»˜æ¬¾å³è§†ä¸ºåŒæ„æœ¬åè®®ï¼å¦åˆ™è¯·ä¸è¦ä»˜æ¬¾ï¼

1. æœ¬æœåŠ¡ä¸ä¼šä»¥ä»»ä½•å½¢å¼æŒä¹…åŒ–å­˜å‚¨ä»»ä½•ç”¨æˆ·çš„ä»»ä½•èŠå¤©ä¿¡æ¯ï¼›

2. æœ¬æœåŠ¡ä¸çŸ¥æ™“ä¹Ÿæ— ä»çŸ¥æ™“ç”¨æˆ·åœ¨æœ¬æœåŠ¡ä¸Šä¼ è¾“çš„ä»»ä½•æ–‡æœ¬å†…å®¹ï¼Œç”¨æˆ·ä½¿ç”¨æœ¬æœåŠ¡å¼•å‘çš„ä»»ä½•è¿æ³•çŠ¯ç½ªåæœï¼Œç”±ä½¿ç”¨è€…æ‰¿æ‹…ï¼Œæœ¬æœåŠ¡å°†å…¨åŠ›é…åˆç”±æ­¤å¯èƒ½å¼•èµ·çš„ç›¸å…³è°ƒæŸ¥ï¼›

3. ç”¨æˆ·åœ¨å¹³å°ä¸Šçš„ä»»ä½•ä»˜æ¬¾è¡Œä¸ºï¼Œå‡è§†ä¸ºå¯¹å…¬ä¼—å·è¿è¥çš„æèµ è¡Œä¸ºï¼Œå¹¶ä¸ä¸æœ¬æœåŠ¡æ„æˆäº¤æ˜“ï¼Œä¹Ÿä¸å­˜åœ¨ä»»ä½•æ³•å¾‹æ„ä¹‰ä¸Šçš„åˆåŒæˆ–å¥‘çº¦å…³ç³»ï¼›

4. æœ¬æœåŠ¡è§†ä¸ºå¼€æºé¡¹ç›® ChatGPT Next Web é¡¹ç›®ä»¥åŠç›¸å…³é¡¹ç›®çš„è¾…åŠ©è°ƒè¯•å·¥å…·ï¼Œè¯·å‹¿ç”¨äºå…¶ä»–ç”¨é€”ï¼›

5. è¯·è‡ªè§‰éµå®ˆã€Šç”Ÿæˆå¼äººå·¥æ™ºèƒ½æœåŠ¡ç®¡ç†æš‚è¡ŒåŠæ³•ã€‹ ã€‚
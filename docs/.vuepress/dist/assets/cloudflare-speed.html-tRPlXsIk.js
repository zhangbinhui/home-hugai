import{_ as l,r as p,o as n,c as a,a as e,b as o,d as r,e as s}from"./app--qWPp6mH.js";const i="/assets/cloudfalreST-RVTd3G97.png",d="/assets/cmd-enter-weehRUks.png",c="/assets/cmd-ready-zf_SGtz6.png",_="/assets/cmd-result-orign-8oIlrlI9.png",u="/assets/cmd-result-yO-Clwf7.png",g="/assets/ip-operator-uZRJww16.png",m="/assets/ip-dns-WC2HITC_.png",f="/assets/ip-dns-province-4A_8x6p8.png",h={},C=s('<h1 id="如果你想提升本站的访问速度" tabindex="-1"><a class="header-anchor" href="#如果你想提升本站的访问速度" aria-hidden="true">#</a> 如果你想提升本站的访问速度</h1><h2 id="写本文的目的" tabindex="-1"><a class="header-anchor" href="#写本文的目的" aria-hidden="true">#</a> 写本文的目的</h2><p>建站以来，提供了不少服务，不管是公益车站，还是拼车，以及one-api等等，也吸引来了不少用户，非常荣幸。</p><p>而因为一些限制，我的服务器并不在国内，所以总是会有一些朋友无法打开网站，或者说访问的时候特别慢，很影响体验。</p><p>以前我在每个服务的介绍都配了一条说明：</p><p>🚦网络环境：各地网络环境不同，如无法访问则说明缘分未到，不必勉强。若是钢铁般的需求，可以公众号私信联系，我帮你想想办法。</p><p>办法是有的，只不过我一个人无法及时响应所有需求，所以今天干脆抽点时间出来写一篇小技巧，<strong>大家只要按步骤操作，大概率能解决无法访问本站服务的问题。</strong></p><p>我们先讲具体操作，后面再说明原理；</p><h2 id="操作部分" tabindex="-1"><a class="header-anchor" href="#操作部分" aria-hidden="true">#</a> 操作部分</h2>',9),N={href:"https://github.com/XIU2/CloudflareSpeedTest/releases",target:"_blank",rel:"noopener noreferrer"},D={href:"https://pan.baidu.com/s/1aDPJm2YVoHlpJVwdmmtK9A?pwd=8888'",target:"_blank",rel:"noopener noreferrer"},w=s('<p><img src="'+i+'" alt="cloudfalreST.png"></p><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>注意目录层级，解压后是 D:\\CloudflareST_windows_amd64</p></div><ol start="2"><li>在文件路径导航栏直接输入 <strong>cmd</strong> ，敲回车，你就应该进入命令行界面，并且是在 D:\\CloudflareST_windows_amd64 这个目录下；</li></ol><p><img src="'+d+'" alt="cmd-enter.png"></p><p><img src="'+c+'" alt="cmd-ready.png"></p><ol start="3"><li>在命令行里敲入命令：<code>CloudflareST.exe</code>，敲回车，你将得到一些IP地址，这些都是Cloudflare对外公布的CDN节点IP：</li></ol><p><img src="'+_+'" alt="cmd-result-orign.png"></p><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>执行之前，记得关掉VPN</p></div><p>然后，我们可以再执行一次命令：<code>CloudflareST.exe -f ip-1.1.1.1.txt </code>，这次带上我们给定的ip地址列表，在这里面挑优质IP：</p><p><img src="'+u+'" alt="cmd-result.png"></p>',10),I={start:"4"},x=e("li",null,[e("p",null,[e("strong",null,"把这些ip地址都复制出来，或者截图私信发给我就行。")])],-1),S={href:"https://www.baidu.com",target:"_blank",rel:"noopener noreferrer"},b=s('<p><img src="'+g+'" alt="ip-operator.png"></p><p>比如我目前在用的网络属于：上海，中国电信。</p><ol start="6"><li>我就可以在域名解析上进行调整，以实现：上海地区，中国电信的网友们就走 上面那个1.1.1.2 这个地址来访问我的网站，这样速度最快，就这么简单。</li></ol><h2 id="原理部分" tabindex="-1"><a class="header-anchor" href="#原理部分" aria-hidden="true">#</a> 原理部分</h2><p>这里涉及到一部分网络的知识，我尽量通俗地把原理说清楚。</p><ol><li><p>我的服务器在国外，大家通过域名访问，最简单的方式就是域名直接指向我的服务器地址。但这样要么服务器被攻击，要么IP被和谐。我第一次搭网站的时候就这样，撑不过两周。</p></li><li><p>所以，我们必须用CDN代理，让所有用户请求先过CDN，然后再到我的服务器，这样一来我可以不暴露我的服务器IP，二来可以防止DDoS攻击；</p></li><li><p>于是，我选择了大名鼎鼎的 Cloudflare 提供的CDN服务。因为对于我们这样小的访问量，<strong>Cloudflare的CDN服务基本上是免费的</strong>，并且也提供一定的防DDos攻击能力，我无法拒绝😂。</p></li><li><p>但是，Cloudflare 毕竟是国外的公司，它在国内默认提供的CDN节点速度会比较慢，所以网友戏称: <strong>Cloudflare CDN 是网站减速器</strong>。使用之后，网站的访问速度会很慢，很多地区访问转老半天才能打开，有些甚至是10秒级别的等待时间😂。</p></li><li><p>因此，我需要一个能提升 Cloudflare CDN 访问速度的解决方案。这里就能看得出来Cloudflare的强大之处了，我们可以利用它的 Anycast 网络。</p><blockquote><p>Anycast 是一种网络寻址和路由方法，可以将传入请求路由到各种不同的位置或“节点”。</p></blockquote><p>通俗解释，Cloudflare 的 CDN 服务在全世界很多个节点，你访问任何一个节点，都算是连上了Cloudflare Anycast 网络，算是他们的内网，能快速地定位到你实际的服务地址。</p></li><li><p>所以，基于这个原理，我们其实只需要让全国各地的网友，访问距离自己最近的那个CDN节点就行了，剩下的就是Cloudflare 自己局域网的事情了。</p><p>比如<strong>四川的网友</strong>原先访问我们的公益车站，域名解析后的是<strong>上海的CDN节点</strong>，要么是打开速度慢，要么四川的网络运营商就限制了你去访问上海的CDN节点，直接打不开公益站了。</p><p>所以我们可以通过调整域名解析，尽量<strong>让四川的网友直接访问四川的CDN节点</strong>，而不是跑去连上海的CDN节点，这样一来速度快非常多，二来也解决了无法范文的问题，一举两得。</p></li><li><p>那么，<strong>如何找到距离自己最近的Cloudflare CDN节点呢？</strong></p><p>上面的操作部分就是啦！CloudflareST.exe 这个程序就是帮助客户端找到当前网络环境下，距离自己最近，相应速度最快的CDN节点。然后我把域名解析换一下，大功告成。</p></li><li><p>最后放两张图看看拼车站点目前的IP解析情况：</p><p><img src="'+m+'" alt="ip-dns.png"></p><p>👆从这张图可以看到，整体上都是绿色的，响应速度不错，我的这个站点一共解析出了39个IP;</p><p><img src="'+f+'" alt="ip-dns-province.png"></p><p>👆从这张图可以看到，不同地区访问我的站点，访问的是不同的ip。</p><p>如果当前这个ip慢，或者访问不了了，按前面操作部分自己动手试一下，<strong>告诉我离你最近的ip 以及 你在哪个地区，用的啥网络运营商就行了</strong>，剩下的就交给我吧，enjoy！</p></li></ol>',6);function T(k,v){const t=p("ExternalLinkIcon");return n(),a("div",null,[C,e("ol",null,[e("li",null,[o("下载这个开源软件 "),e("a",N,[o("XIU2/CloudflareSpeedTest"),r(t)]),o("，无法打开就用我提供的百度网盘链接："),e("a",D,[o("CloudflareST_windows_amd64.zip"),r(t)]),o("，解压到D盘，然后你应该看到这样的页面：")])]),w,e("ol",I,[x,e("li",null,[e("p",null,[o("对了，还要告知你目前所在的省份，以及使用的网络运营商是电信，联通还是移动。如果不清楚的，打开"),e("a",S,[o("百度"),r(t)]),o("，搜索框输入ip，百度一下就能看到了：")])])]),b])}const V=l(h,[["render",T],["__file","cloudflare-speed.html.vue"]]);export{V as default};
